<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprAlly1</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>objAllyParent</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.selection[3,0] = false
ai = path_add()
xx = 480
yy = 180
sel = 0
attacking = false
tx = 0
ty = 0
image_speed = 0.1
randomize()
event_inherited()
timeLimit = noone
battleHp = noone
dir = "null"
time = 0
retreat = false
defend = false
timeAttack = false
basic = false
hp = 0
mp = 0
int = 0
str = 0
acc = 0
dex = 0

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Damage
if room = rm_MFight or room = rm_TutFight or room = rm_FightC or room = rm_FightIC{
if sprite_index = sprFighterAllyCombatSwing{
    enemy = instance_nearest(xx,yy,objEnemyFightParent){
        enemy.battleHp -= (str+int)/2
    }
}
if sprite_index = sprMageAllyCombatCast{
    enemy = instance_nearest(xx,yy,objEnemyFightParent){
        enemy.battleHp -= (str+int)/2
    }
}
if sprite_index = sprArcherAllyCombatShoot{
    enemy = instance_nearest(xx,yy,objEnemyFightParent){
        enemy.battleHp -= (dex+acc)/2
    }
}
if sprite_index = sprRogueAllyCombatDraw{
    enemy = instance_nearest(xx,yy,objEnemyFightParent){
        enemy.battleHp -= (dex+str)/2
    }
}
if sprite_index = sprBardAllyCombatPlay{
    enemy = instance_nearest(xx,yy,objPlayerAllyFightParent){
        enemy.battleHp += (int+acc)/2
    }
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (sprite_index = sprFighterAllyCombatSwing) or (sprite_index = sprMageAllyCombatCast) or (sprite_index = sprBardAllyCombatPlay) or (sprite_index = sprArcherAllyCombatShoot) or (sprite_index = sprRogueAllyCombatDraw){
    if class = "fighter"{
        sprite_index = sprFighterAllyCombatIdle
    }
    if class = "mage"{
        sprite_index = sprMageAllyCombatIdle
    }
    if class = "bard"{
        sprite_index = sprBardAllyCombatIdle
    }
    if class = "archer"{
        sprite_index = sprArcherAllyCombatIdle
    }
    if class = "rogue"{
        sprite_index = sprRogueAllyCombatIdle
    }
    if (mp_grid_path(global.grid,ai,x,y,global.allyPos[1,1],global.allyPos[1,2],1)) &amp;&amp; attacking = false
        {
            path_start(ai,3,0,0)
            attacked = true
            sel = noone
        }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (room = rm_MFight or room = rm_TutFight or room = rm_FightC or room = rm_FightIC) and class = "null"{
    global.selection[3,0] = false
}else global.selection[3,0] = true
event_inherited()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Combat
    if class = "fighter"{
        timeLimit = 780
    }
    if class = "mage"{
        timeLimit = 600
    }
    if class = "bard"{
        timeLimit = 600
    }
    if class = "archer"{
        timeLimit = 780
    }
    if class = "rogue"{
        timeLimit = 420
    }
if room = rm_MFight or room = rm_TutFight or room = rm_FightC or room = rm_FightIC{
    if timeAttack = false &amp;&amp; global.attack = false { //prevents timer from running during an attack animation
    time ++
    }
    if time &gt;= timeLimit &amp;&amp; retreat = true{
        with instance_create(x,y,objRoomTransfer) targetRoom = room0
    }
    if class = "fighter"{
        if time &gt;= timeLimit{
            timeAttack = true
            if global.attack = false{ //only allows one person to be ready at a time
            ready = true
            objGui.gui = true
            }
            global.attack = true
        }else timeAttack = false
    }
    if class = "mage"{
        if time &gt;= timeLimit{
            timeAttack = true
            if global.attack = false{
            objGui.gui = true
            ready = true
            }
            global.attack = true
        }else timeAttack = false
    }
    if class = "bard"{
        if time &gt;= timeLimit{
            timeAttack = true
            if global.attack = false{
            objGui.gui = true
            ready = true
            }
            global.attack = true
        }else timeAttack = false
    }
    if class = "rogue"{
        if time &gt;= timeLimit{
            timeAttack = true
            if global.attack = false{
            objGui.gui = true
            ready = true
            }
            global.attack = true
        }else timeAttack = false
    }
    if class = "archer"{
        if time &gt;= timeLimit{
            timeAttack = true
            if global.attack = false{
            objGui.gui = true
            ready = true
            }
            global.attack = true
        }else timeAttack = false
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Move to Enemy
draw_self()
        sel = clamp(sel,1,9)
if x = xx + 80 &amp;&amp; y = yy &amp;&amp; attacking = false{
    if class = "fighter"{
        sprite_index = sprFighterAllyCombatSwing
    }
    if class = "mage"{
        sprite_index = sprMageAllyCombatCast
    }
    if class = "bard"{
        sprite_index = sprBardAllyCombatPlay
    }
    if class = "archer"{
        sprite_index = sprArcherAllyCombatShoot
    }
    if class = "rogue"{
        sprite_index = sprRogueAllyCombatDraw
    }
}

if ready = true &amp;&amp; attacked = true &amp;&amp; x = global.allyPos[1,1] &amp;&amp; y = global.allyPos[1,2]{
        ready = false
        global.attack = false
        attacked = false
        }
    if (x = global.allyPos[1,1] &amp;&amp; y = global.allyPos[1,2] &amp;&amp; timeAttack = true){
        attacking = true
    }else attacking = false    
if global.attacker = 1{

draw_set_colour(c_fuchsia)
var px = (objAlly1.x div 16) * 16 + 8
var py = (objAlly1.y div 16) * 16 + 8


    


/*if keyboard_check_pressed(vk_space) and attacking = false
{
    xx = global.allyPos[2,1] - 40
    yy = global.allyPos[2,2] 
    path_start(ai,3,0,0)
}
//Move player
if x = global.allyPos[2,1] and y = global.allyPos[2,2]
{
    attacking = true
}else{
    attacking = false
} */

if attacking != false{
    if keyboard_check_pressed(vk_space) &amp;&amp; (mp_grid_path(global.grid,ai,x,y,xx + 80,yy,1)) &amp;&amp; attacking = true &amp;&amp; (global.attack = true and ready = true) &amp;&amp; basic = true
        {
            basic = false
            path_start(ai,3,0,0)            
            time = 0
        }
}
    
if attacking = true{
    if keyboard_check_pressed(ord("W")){
            sel += -3
            dir = "up"
        }
    if keyboard_check_pressed(ord("A")){
            sel += -1
            dir = "left"
        }
    if keyboard_check_pressed(ord("S")){
            sel += 3
            dir = "down"
        }
    if keyboard_check_pressed(ord("D")){
            sel += 1
            dir = "right"
        }

    if sel = 10 sel = 1
    if sel = 11 sel = 2
    if sel &gt;= 12 sel = 3
    
    if sel = 0 sel = 9
    if sel = -1 sel = 8
    if sel = -2 sel = 7
    if sel &lt;= -3 sel = 7
}
    
    draw_self()
//Select Monster
if basic = true{
if sel = 1 
{
    if global.selection[sel,0] = false{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }else{
    xx = global.enemyPos[1,1]
    yy = global.enemyPos[1,2]
    if class = "bard"{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }
    draw_sprite(sprEnemyTarget,0,xx,yy)
    }
}

if sel = 2
{
    if global.selection[sel,0] = false{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }else{
    xx = global.enemyPos[2,1]
    yy = global.enemyPos[2,2]
    if class = "bard"{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }
    draw_sprite(sprEnemyTarget,0,xx,yy)
    }
}

if sel = 3
{
if global.selection[sel,0] = true{
    if class != "bard"{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }
}
    if sel = 10 sel = 1
    if sel = 11 sel = 2
    if sel = 12 sel = 3
    
    if sel = 0 sel = 9
    if sel = -1 sel = 8
    if sel = -2 sel = 7
    if sel &lt;= -3 sel = 7
    
    if global.selection[sel,0] = false{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    
    }else{
    xx = global.allyPos[1,1] - 40
    yy = global.allyPos[1,2]
    draw_sprite(sprAllyTarget,0,xx + 40,yy)
    }
}

if sel = 4
{
    if global.selection[sel,0] = false{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }else{
    xx = global.enemyPos[3,1]
    yy = global.enemyPos[3,2]
    if class = "bard"{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }
    draw_sprite(sprEnemyTarget,0,xx,yy)
    }
}
    
if sel = 5 
{
    if global.selection[sel,0] = false{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }else{
    xx = global.enemyPos[4,1]
    yy = global.enemyPos[4,2]
    if class = "bard"{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }
    draw_sprite(sprEnemyTarget,0,xx,yy)
    }
}

    
if sel = 6 
{
if global.selection[sel,0] = true{
    if class != "bard"{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }
}
    if global.selection[sel,0] = false{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }else{
    xx = global.allyPos[2,1] - 40
    yy = global.allyPos[2,2]
    draw_sprite(sprAllyTarget,0,xx + 40,yy)
    }
}
    if sel = 10 sel = 1
    if sel = 11 sel = 2
    if sel = 12 sel = 3
    
    if sel = 0 sel = 9
    if sel = -1 sel = 8
    if sel = -2 sel = 7
    if sel &lt;= -3 sel = 7
    
if sel = 7
{
    if global.selection[sel,0] = false{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }else{
    xx = global.enemyPos[5,1]
    yy = global.enemyPos[5,2]
    if class = "bard"{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }
    draw_sprite(sprEnemyTarget,0,xx,yy)
    }
}

    
if sel = 8 
{
    if global.selection[sel,0] = false{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }else{
    xx = global.enemyPos[6,1]
    yy = global.enemyPos[6,2]
    if class = "bard"{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }
    draw_sprite(sprEnemyTarget,0,xx,yy)
    }
}

    
if sel = 9
{
if global.selection[sel,0] = true{
    if class != "bard"{
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }
}
    if global.selection[sel,0] = false{
    
        if dir = "right"{
        sel ++
        }
        if dir = "left"{
        sel --
        }
        if dir = "up"{
        sel -=3
        }
        if dir = "down"{
        sel +=3
        }
    }else{
    xx = global.allyPos[3,1] - 40
    yy = global.allyPos[3,2]
    draw_sprite(sprAllyTarget,0,xx + 40,yy)
    }
}
}
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///image speeds
if sprite_index = sprFighterAllyCombatIdle{
    image_speed = 0.2
}
if sprite_index = sprFighterAllyCombatSwing{
    image_speed = 0.1
}
if sprite_index = sprMageAllyCombatIdle{
    image_speed = 0.2
}
if sprite_index = sprMageAllyCombatCast{
    image_speed = 0.1
}
if sprite_index = sprBardAllyCombatIdle{
    image_speed = 0.2
}
if sprite_index = sprBardAllyCombatPlay{
    image_speed = 0.1
}
if sprite_index = sprRogueAllyCombatIdle{
    image_speed = 0.2
}
if sprite_index = sprRogueAllyCombatDraw{
    image_speed = 0.1
}
if sprite_index = sprArcherAllyCombatIdle{
    image_speed = 0.2
}
if sprite_index = sprArcherAllyCombatShoot{
    image_speed = 0.1
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if room = rm_MFight or room = rm_TutFight or room = rm_FightC or room = rm_FightIC{
    if battleHp &gt; hp{
        battleHp = hp
    }
    if battleHp &lt;= 0{
        global.selection[3,0] = false
        visible = false
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
